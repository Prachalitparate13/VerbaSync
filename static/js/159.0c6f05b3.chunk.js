(()=>{var e={59:(e,t,s)=>{"use strict";var n=s(138);const o={DOWNLOADING:"DOWNLOADING",LOADING:"LOADING",RESULT:"RESULT",RESULT_PARTIAL:"RESULT_PARTIAL",INFERENCE_REQUEST:"INFERENCE_REQUEST",INFERENCE_DONE:"INFERENCE_DONE"};n._K2.allowLocalModels=!1,n._K2.useBrowserCache=!1;class i{static async getInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===this.instance&&(this.instance=await(0,n.TkF)(this.task,null,{progress_callback:e})),this.instance}}async function r(e){const{status:t}=e;if("progress"===t){const{file:t,progress:s,loaded:n,total:i}=e;!async function(e,t,s,n){self.postMessage({type:o.DOWNLOADING,file:e,progress:t,loaded:s,total:n})}(t,s,n,i)}}function a(e){self.postMessage({type:o.LOADING,status:e})}i.task="automatic-speech-recognition",i.model="openai/whisper-tiny.en",i.instance=null,self.addEventListener("message",(async e=>{const{type:t,audio:s}=e.data;t===o.INFERENCE_REQUEST&&await async function(e){let t;a("loading");try{t=await i.getInstance(r)}catch(o){console.log(o.message)}a("success");const s=5,n=new c(t,s);await t(e,{top_k:0,do_sample:!1,chunk_length:30,stride_length_s:s,return_timestamps:!0,callback_function:n.callbackFunction.bind(n),chunk_callback:n.chunkCallback.bind(n)}),n.sendFinalResult()}(s)}));class c{constructor(e,t){this.pipeline=e,this.stride_length_s=t,this.chunks=[],this.time_precision=(null===e||void 0===e?void 0:e.processor.feature_extractor.config.chunk_length)/e.model.config.max_source_positions,this.processed_chunks=[],this.callbackFunctionCounter=0}sendFinalResult(){self.postMessage({type:o.INFERENCE_DONE})}callbackFunction(e){if(this.callbackFunctionCounter+=1,this.callbackFunctionCounter%10!==0)return;const t=e[0];!function(e){self.postMessage({type:o.RESULT_PARTIAL,result:e})}({text:this.pipeline.tokenizer.decode(t.output_token_ids,{skip_special_tokens:!0}),start:this.getLastChunkTimestamp(),end:void 0})}chunkCallback(e){this.chunks.push(e);const[t,{chunks:s}]=this.pipeline.tokenizer._decode_asr(this.chunks,{time_precision:this.time_precision,return_timestamps:!0,force_full_sequence:!1});var n,i,r;this.processed_chunks=s.map(((e,t)=>this.processChunk(e,t))),n=this.processed_chunks,i=!1,r=this.getLastChunkTimestamp(),self.postMessage({type:o.RESULT,results:n,isDone:i,completedUntilTimestamp:r})}getLastChunkTimestamp(){if(0===this.processed_chunks.length)return 0}processChunk(e,t){const{text:s,timestamp:n}=e,[o,i]=n;return{index:t,text:`${s.trim()}`,start:Math.round(o),end:Math.round(i)||Math.round(o+.9*this.stride_length_s)}}}},52:()=>{},143:()=>{},603:()=>{},806:()=>{},9:()=>{},837:()=>{},499:()=>{}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}s.m=e,s.x=()=>{var e=s.O(void 0,[138],(()=>s(59)));return e=s.O(e)},(()=>{var e=[];s.O=(t,n,o,i)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],i=e[u][2];for(var a=!0,c=0;c<n.length;c++)(!1&i||r>=i)&&Object.keys(s.O).every((e=>s.O[e](n[c])))?n.splice(c--,1):(a=!1,i<r&&(r=i));if(a){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]}})(),(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var i=Object.create(null);s.r(i);var r={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>r[e]=()=>n[e]));return r.default=()=>n,s.d(i,r),i}})(),s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>"static/js/"+e+".064bdea6.chunk.js",s.miniCssF=e=>{},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/",(()=>{var e={159:1};s.f.i=(t,n)=>{e[t]||importScripts(s.p+s.u(t))};var t=self.webpackChunkverbasync=self.webpackChunkverbasync||[],n=t.push.bind(t);t.push=t=>{var o=t[0],i=t[1],r=t[2];for(var a in i)s.o(i,a)&&(s.m[a]=i[a]);for(r&&r(s);o.length;)e[o.pop()]=1;n(t)}})(),(()=>{var e=s.x;s.x=()=>s.e(138).then(e)})();s.x()})();
//# sourceMappingURL=159.0c6f05b3.chunk.js.map